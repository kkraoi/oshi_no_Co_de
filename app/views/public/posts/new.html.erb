<% content_for :title, "投稿｜コード投稿" %>

<%= form_with model:@post, local: true do |f| %>
<div class="u-col2" id="js-col2-root">
  <div class="u-col2-main">
    <div class="u-col2-main-inner">
      <h1 class="u-title u-pt-50">コード投稿</h1>

      <%# タイトル %>
      <div class="u-scroll-target" id="title">
        <section class="u-sec">
          <div class="u-inner-4">
            <h2 class="u-title-1">タイトル（必須）</h2>
            <%= f.text_field :title, class: "u-field", placeholder: "例: JSでタブメニュー" %>
          </div>
        </section>
      </div>

      <%# コード %>
      <div class="u-scroll-target" id="code">
        <section class="u-sec">
          <div class="u-inner-4">
            <h2 class="u-title-1">コード（必須）</h2>
            <%# fields_for: 入れ子のモデルのフォームを生成するためのヘルパー。引数は子モデルをシンボルで取り、ブロック引数は、子モデルに対するフォームビルダーオブジェクトとして扱う。 %>
            <%= f.fields_for :codes do |code_fields| %>
              <div class="p-code-block">
                <%= code_fields.text_field :name %>
                <%# collection_select 第1引数, 第2引数, 第3引数, 第4引数, オプション %>
                <%# 第1引数: フィールド名（保存先の属性）, 第2引数: コレクション（選択肢一覧）, 第3引数: 選択肢の値（保存されるid）, 第4引数: 選択肢の表示名（見せるラベル）, オプション: prompt・html属性など %>
                <%= code_fields.collection_select :language_id, @languages, :id, :extension, prompt: "拡張子を選択してください" %>
                <%= code_fields.text_area :content %>
              </div>
            <% end %>
          </div>
        </section>
      </div>

      <%# 解説 %>
      <div class="u-scroll-target" id="description">
        <section class="u-sec">
          <div class="u-inner-4">
            <h2 class="u-title-1">解説</h2>
            <p class="u-mb-10">詳細なコードの説明をMD記法で記載することができます。</p>
            <%= f.text_area :description, class: "u-field-text_area", placeholder: "例: 
  ## JSの解説
  ### ターゲットとなるクラスを取得する
  解説解説..." %>
          </div>
        </section>
      </div>
    </div>
  </div>

  <aside class="u-col2-side">
    <div id="js-col2-drawer" class="u-btn-1 type-1 opt-size-s u-col2-drawer" aria-label="サイドメニューを開閉する ">
      <span class="icon-right">
        <i class="fa-solid fa-arrow-right"></i>
      </span>
      <span class="icon-left">
        <i class="fa-solid fa-arrow-left"></i>
      </span>
    </div>

    <div class="u-col2-side-content">
      <div class="u-col2-side-inner">
        <div class="u-side">
          <div class="u-side-body">
            <menu class="u-menu">
              <li>
                <a href="#title">タイトル</a>
              </li>
              <li>
                <a href="#code">コード</a>
              </li>
              <li>
                <a href="#description">解説</a>
              </li>
            </menu>
          </div>
          <div class="u-side-foot">
            <div class="u-btn-wrap">
              <%= f.submit "投稿する", class: "u-btn opt-size-full" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </aside>
</div>
<% end %>